<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Oijee! Andmeteadus - 6&nbsp; Korrastus</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./joonised.html" rel="next">
<link href="./kasutus.html" rel="prev">
<link href="./logo.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Tulemusi ei ole",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Korrastus</span></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./" class="sidebar-logo-link">
      <img src="./logo.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Oijee! Andmeteadus</a> 
    </div>
      </div>
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Saateks</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">Põhimõisted</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./andmeteadus.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Andmed ja andmeteadus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mlaibd.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Masinõpe ja suurandmed</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./analüüs.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Andmete analüüs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tarkvara.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Tarkvara andmetöötluseks</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">R keel</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kasutus.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Põhikasutus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./korrastus.html" class="sidebar-item-text sidebar-link active"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Korrastus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./joonised.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Joonised</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">Statistika</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tunnused.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Tunnuste liigid</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./valim.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Valim ja kogum</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./valikunihe.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Valikunihe</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./taasvalik.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Taasvalik</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./seosed.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Seosed</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./põhjuslikkus.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Põhjuslikkus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tinglikkus.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Tinglikkus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./klassifitseerimine.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Klassifitseerimine</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kaugus.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Statistiline kaugus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./klasterdamine.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Klasterdamine</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./mõõtmevähendus.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Mõõtmevähendus</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">Rakendused</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./korrelatsioon.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Korrelatsioon</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./seosereeglid.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Seosereeglid</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./usaldusvahemikud.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Usaldusvahemikud</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./linreg.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Lineaarne regressioon</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./logreg.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Logistiline regressioon</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./otsusepuu.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Otsusepuu</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lähinaabrid.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Lähinaabrid</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./hierarhiline.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Hierarhiline klasterdamine</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./kkeskmised.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">K-keskmised</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./peakomponendid.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Peakomponentide analüüs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./faktoranalüüs.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Faktoranalüüs</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./tekstikaeve.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Tekstikaeve</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./maakaardid.html" class="sidebar-item-text sidebar-link"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Maakaardid</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./viited.html" class="sidebar-item-text sidebar-link">Viited</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sisukord</h2>
   
  <ul>
  <li><a href="#veeru-nimetused" id="toc-veeru-nimetused" class="nav-link active" data-scroll-target="#veeru-nimetused"><span class="toc-section-number">6.1</span>  Veeru nimetused</a></li>
  <li><a href="#tunnuse-tüüp" id="toc-tunnuse-tüüp" class="nav-link" data-scroll-target="#tunnuse-tüüp"><span class="toc-section-number">6.2</span>  Tunnuse tüüp</a></li>
  <li><a href="#kordumatud-väärtused" id="toc-kordumatud-väärtused" class="nav-link" data-scroll-target="#kordumatud-väärtused"><span class="toc-section-number">6.3</span>  Kordumatud väärtused</a></li>
  <li><a href="#puuduvad-väärtused" id="toc-puuduvad-väärtused" class="nav-link" data-scroll-target="#puuduvad-väärtused"><span class="toc-section-number">6.4</span>  Puuduvad väärtused</a></li>
  <li><a href="#väärtuste-asendamine" id="toc-väärtuste-asendamine" class="nav-link" data-scroll-target="#väärtuste-asendamine"><span class="toc-section-number">6.5</span>  Väärtuste asendamine</a></li>
  <li><a href="#väärtuste-teisendamine" id="toc-väärtuste-teisendamine" class="nav-link" data-scroll-target="#väärtuste-teisendamine"><span class="toc-section-number">6.6</span>  Väärtuste teisendamine</a></li>
  <li><a href="#korrasandmed" id="toc-korrasandmed" class="nav-link" data-scroll-target="#korrasandmed"><span class="toc-section-number">6.7</span>  Korrasandmed</a>
  <ul class="collapse">
  <li><a href="#andmetabeli-laiendamine" id="toc-andmetabeli-laiendamine" class="nav-link" data-scroll-target="#andmetabeli-laiendamine"><span class="toc-section-number">6.7.1</span>  Andmetabeli laiendamine</a></li>
  <li><a href="#andmetabeli-kitsendamine" id="toc-andmetabeli-kitsendamine" class="nav-link" data-scroll-target="#andmetabeli-kitsendamine"><span class="toc-section-number">6.7.2</span>  Andmetabeli kitsendamine</a></li>
  </ul></li>
  <li><a href="#agregeerimine" id="toc-agregeerimine" class="nav-link" data-scroll-target="#agregeerimine"><span class="toc-section-number">6.8</span>  Agregeerimine</a></li>
  <li><a href="#tabelite-ühendamine" id="toc-tabelite-ühendamine" class="nav-link" data-scroll-target="#tabelite-ühendamine"><span class="toc-section-number">6.9</span>  Tabelite ühendamine</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-korrastus" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Korrastus</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<!--
Data preparation
-->
<p>Andmete edasiseks analüüsimiseks ette valmistamine kipub olema kogu andmeanalüüsi kõige aeganõudvam osa. Andmeanalüütikud ise on hinnanud, et kogu andmeanalüüsi käigus veedavad nad umbes 80% ajast andmeid korrastades <span class="citation" data-cites="wickham14tidy kelleher18data">(<a href="viited.html#ref-kelleher18data" role="doc-biblioref">Kelleher &amp; Tierney, 2018</a>; <a href="viited.html#ref-wickham14tidy" role="doc-biblioref">Wickham, 2014</a>)</span>. Sekundaarandmed ei ole peaaegu kunagi täpselt selliselt vormistatnud nagu meie poolt valitud protseduur seda eeldab, mistõttu ilma oskuseta andmeid korrastada ei ole nendega enamasti suurt midagi teha.</p>
<p>Alljärgnevalt uurime keskmist brutopalka ja palgalõhet Eestis ning nendega seotud näitajaid.</p>
<section id="veeru-nimetused" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="veeru-nimetused"><span class="header-section-number">6.1</span> Veeru nimetused</h2>
<p>Kui oleme andmed töölauale laadinud, siis esmalt on mõistlik saada nendest ülevaade. Selleks kasutame juba tuttavaid funktsioone objekti esimeste ridade (<code>head()</code>) ja ülesehituse (<code>str()</code>) kuvamiseks.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       Näitaja               Tegevusala   Vaatlusperiood
1 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad   2002 I kvartal
2 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad  2002 II kvartal
3 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad 2002 III kvartal
4 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad  2002 IV kvartal
5 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad   2003 I kvartal
6 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad  2003 II kvartal
  PA001..KESKMINE.BRUTOPALK..TÖÖJÕUKULU..TÖÖTATUD.TUNNID.JA.TÖÖTAJATE.ARV
1                                                                     366
2                                                                     406
3                                                                     374
4                                                                     416
5                                                                     405
6                                                                     442</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   7680 obs. of  4 variables:
 $ Näitaja                                                                : chr  "Keskmine brutokuupalk, eurot" "Keskmine brutokuupalk, eurot" "Keskmine brutokuupalk, eurot" "Keskmine brutokuupalk, eurot" ...
 $ Tegevusala                                                             : chr  "Kokku – kõik tegevusalad" "Kokku – kõik tegevusalad" "Kokku – kõik tegevusalad" "Kokku – kõik tegevusalad" ...
 $ Vaatlusperiood                                                         : chr  "2002 I kvartal" "2002 II kvartal" "2002 III kvartal" "2002 IV kvartal" ...
 $ PA001..KESKMINE.BRUTOPALK..TÖÖJÕUKULU..TÖÖTATUD.TUNNID.JA.TÖÖTAJATE.ARV: num  366 406 374 416 405 442 411 455 431 474 ...</code></pre>
</div>
</div>
<p>Näeme, et neljandal veerul on pikk ja lohisev nimetus. Andmetabel veeru nimetusi saame kuvada funktsiooniga <code>names()</code> ja selle funktsiooni nimetust kasutades saame ka neljandale veerule uue nime anda.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Näitaja"                                                                
[2] "Tegevusala"                                                             
[3] "Vaatlusperiood"                                                         
[4] "PA001..KESKMINE.BRUTOPALK..TÖÖJÕUKULU..TÖÖTATUD.TUNNID.JA.TÖÖTAJATE.ARV"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(palk)[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="st">'väärtus'</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Näitaja"        "Tegevusala"     "Vaatlusperiood" "väärtus"       </code></pre>
</div>
</div>
</section>
<section id="tunnuse-tüüp" class="level2 page-columns page-full" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="tunnuse-tüüp"><span class="header-section-number">6.2</span> Tunnuse tüüp</h2>
<p>Andmetabeli ülesehituse küsimisel kuvatakse ka iga tunnuse tüüp, millest sagedasemad on arvtunnus (<code>num</code>) ja nimitunnus (<code>chr</code>). Täpsemalt loe mõõtmise tasemete ja tunnuse tüüpide kohta <a href="tunnused.html">peatükist&nbsp;<span>8</span></a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'data.frame':   7680 obs. of  4 variables:
 $ Näitaja       : chr  "Keskmine brutokuupalk, eurot" "Keskmine brutokuupalk, eurot" "Keskmine brutokuupalk, eurot" "Keskmine brutokuupalk, eurot" ...
 $ Tegevusala    : chr  "Kokku – kõik tegevusalad" "Kokku – kõik tegevusalad" "Kokku – kõik tegevusalad" "Kokku – kõik tegevusalad" ...
 $ Vaatlusperiood: chr  "2002 I kvartal" "2002 II kvartal" "2002 III kvartal" "2002 IV kvartal" ...
 $ väärtus       : num  366 406 374 416 405 442 411 455 431 474 ...</code></pre>
</div>
</div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Pea meeles!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Tunnuse tüüp peab olema objektis määratud vastavalt tunnuse mõõtmise tasemele. Arvud peavad olema objektides salvestatud arvtunnusena ning sõnad ja laused nimitunnusena. Vastupidisel juhul käsitlevad funktsioonid tunnuseid valesti ega võimalda rakendada vajalikke tehteid.</p>
</div>
</div>
<div class="page-columns page-full"><p>Tunnuse tüüp on oluline selleks et funktsioonid oskaksid neid õigesti kasutada. Nt kui arve sisaldav veerg on laaditud mingil põhjusel<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> objekti nimitunnusena, siis ei ole võimalik sellise tunnusega matemaatilisi tehteid teha. Kui aga andmetabelis on mingi vaatluse kood (nt isikukood), mille R keel tuvastab arvtunnusena, siis on mõistlik salvestada see nimitunnusena, et mitte selle alusel kogemata arvutusi teha. Tunnuste tüübi teisendamiseks saab kasutada funktsioone <code>as.character()</code> ja <code>as.numeric()</code>.</p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;Kui arve sisaldavasse veergu on sattunud mõni sõna, täht, kirjavahemärk vms, siis R loeb selles veerus olevad väärtused enamasti nimitunnusteks.</p></li></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kui arvud on salvestatud nimitunnusena, siis ei saa arvutata keskmist.</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>palk<span class="sc">$</span>väärtus <span class="ot">&lt;-</span> <span class="fu">as.character</span>(palk<span class="sc">$</span>väärtus)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(palk<span class="sc">$</span>väärtus) <span class="sc">%&gt;%</span> mean</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in mean.default(.): argument is not numeric or logical: returning NA</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kui arvtunnus on õigesti sisestatud, siis saab selle alusel ka arvutada.</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>palk<span class="sc">$</span>väärtus <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(palk<span class="sc">$</span>väärtus)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(palk<span class="sc">$</span>väärtus) <span class="sc">%&gt;%</span> mean</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 401.5</code></pre>
</div>
</div>
</section>
<section id="kordumatud-väärtused" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="kordumatud-väärtused"><span class="header-section-number">6.3</span> Kordumatud väärtused</h2>
<p>Eelnevalt kuvatud andmetabeli puhul huvitab meid ilmselt, mis võimalikud väärtused on veergudes “Näitaja”, “Tegevusala” ja “Vaatlusperiood”. Kuna tabelis on 7680 rida, siis ei ole otstarbekas kuvada kõiki väärtusi, vaid ainult neid, mis ei kordu. Selleks on käsklus <code>unique()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(palk<span class="sc">$</span>Näitaja)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Keskmine brutokuupalk, eurot"                          
[2] "Keskmine kuutööjõukulu töötaja kohta, eurot"           
[3] "Osalise tööajaga töötajate töötatud tundide osakaal, %"
[4] "Keskmine töötajate arv, taandatud täistööajale"        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(palk<span class="sc">$</span>Tegevusala)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "Kokku – kõik tegevusalad"                                          
 [2] "Põllumajandus, metsamajandus ja kalapüük"                          
 [3] "Mäetööstus"                                                        
 [4] "Töötlev tööstus"                                                   
 [5] "Elektrienergia, gaasi, auru ja konditsioneeritud õhuga varustamine"
 [6] "Veevarustus; kanalisatsioon; jäätme- ja saastekäitlus"             
 [7] "Ehitus"                                                            
 [8] "Hulgi- ja jaekaubandus; mootorsõidukite ja mootorrataste remont"   
 [9] "Veondus ja laondus"                                                
[10] "Majutus ja toitlustus"                                             
[11] "Info ja side"                                                      
[12] "Finants- ja kindlustustegevus"                                     
[13] "Kinnisvaraalane tegevus"                                           
[14] "Kutse-, teadus- ja tehnikaalane tegevus"                           
[15] "Haldus- ja abitegevused"                                           
[16] "Avalik haldus ja riigikaitse; kohustuslik sotsiaalkindlustus"      
[17] "Haridus"                                                           
[18] "Tervishoid ja sotsiaalhoolekanne"                                  
[19] "Kunst, meelelahutus ja vaba aeg"                                   
[20] "Muud teenindavad tegevused"                                        </code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(palk<span class="sc">$</span>Vaatlusperiood)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "2002 I kvartal"   "2002 II kvartal"  "2002 III kvartal" "2002 IV kvartal" 
 [5] "2003 I kvartal"   "2003 II kvartal"  "2003 III kvartal" "2003 IV kvartal" 
 [9] "2004 I kvartal"   "2004 II kvartal"  "2004 III kvartal" "2004 IV kvartal" 
[13] "2005 I kvartal"   "2005 II kvartal"  "2005 III kvartal" "2005 IV kvartal" 
[17] "2006 I kvartal"   "2006 II kvartal"  "2006 III kvartal" "2006 IV kvartal" 
[21] "2007 I kvartal"   "2007 II kvartal"  "2007 III kvartal" "2007 IV kvartal" 
[25] "2008"             "2008 I kvartal"   "2008 II kvartal"  "2008 III kvartal"
[29] "2008 IV kvartal"  "2009"             "2009 I kvartal"   "2009 II kvartal" 
[33] "2009 III kvartal" "2009 IV kvartal"  "2010"             "2010 I kvartal"  
[37] "2010 II kvartal"  "2010 III kvartal" "2010 IV kvartal"  "2011"            
[41] "2011 I kvartal"   "2011 II kvartal"  "2011 III kvartal" "2011 IV kvartal" 
[45] "2012"             "2012 I kvartal"   "2012 II kvartal"  "2012 III kvartal"
[49] "2012 IV kvartal"  "2013"             "2013 I kvartal"   "2013 II kvartal" 
[53] "2013 III kvartal" "2013 IV kvartal"  "2014"             "2014 I kvartal"  
[57] "2014 II kvartal"  "2014 III kvartal" "2014 IV kvartal"  "2015"            
[61] "2015 I kvartal"   "2015 II kvartal"  "2015 III kvartal" "2015 IV kvartal" 
[65] "2016"             "2016 I kvartal"   "2016 II kvartal"  "2016 III kvartal"
[69] "2016 IV kvartal"  "2017"             "2017 I kvartal"   "2017 II kvartal" 
[73] "2017 III kvartal" "2017 IV kvartal"  "2018"             "2018 I kvartal"  
[77] "2018 II kvartal"  "2018 III kvartal" "2018 IV kvartal"  "2019"            
[81] "2019 I kvartal"   "2019 II kvartal"  "2019 III kvartal" "2019 IV kvartal" 
[85] "2020"             "2020 I kvartal"   "2020 II kvartal"  "2020 III kvartal"
[89] "2020 IV kvartal"  "2021"             "2021 I kvartal"   "2021 II kvartal" 
[93] "2021 III kvartal" "2021 IV kvartal"  "2022 I kvartal"   "2022 II kvartal" </code></pre>
</div>
</div>
<p>Näeme, et vaatlusperioodi veerus on läbisegi aastad ja kvartalid. Kui teisendame vastava tunnuse arvtunnuseks, siis tähti sisaldavad väärtused muutuvad puuduvateks väärtusteks.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>palk<span class="sc">$</span>Vaatlusperiood <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(palk<span class="sc">$</span>Vaatlusperiood)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: NAs introduced by coercion</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(palk<span class="sc">$</span>Vaatlusperiood)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]   NA 2008 2009 2010 2011 2012 2013 2014 2015 2016 2017 2018 2019 2020 2021</code></pre>
</div>
</div>
</section>
<section id="puuduvad-väärtused" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="puuduvad-väärtused"><span class="header-section-number">6.4</span> Puuduvad väärtused</h2>
<p>Kui andmetes esineb puuduvaid väärtusi, siis on kolm peamist viisi, kuidas nendega tekkivaid probleeme lahendada.</p>
<ul>
<li>Enamasti eemaldatakse andmetabelist vaatlused (read), milles esinevad puuduvad väärtused.</li>
<li>Kui on teada, et puuduvad väärtused esinevad juhuslikult, siis on lihtne viis on asendada need veeru keskmise väärtusega.</li>
<li>Õigem on tuletada puuduvad väärtused aga teiste veergude väärtuste alusel. Tõeste väärtuse prognoosimiseks on palju erievaid võimalusi, sh masinõpe.</li>
<li>Kui puuduvaid väärtusi soovitakse analüüsi kaasata või eraldi uurida, siis saab need eraldi väärtusega määratleda. Puuduvate nimitunnuse väärtustele võib anda mingi nimetuse, arvtunnuse korral võib puuduvad väärtused määratleda eraldi veerus loogilise muutujana.</li>
</ul>
<p>Vaatlusperioodi teisendamise tulemusel on nüüd vastavas veerus puuduvad väärtused nendel juhtudel, kus lisaks aastaarvule oli kirjas ka kvartal. Seega saame tabelisse alles jätta vaid aastaid esindavad väärtused kui eemaldame need read, kus vaatlusperiood puudub. Puuduvate väärtuse määratlemiseks saame kasutada funktsiooni <code>is.na()</code> ja olemasolevate väärtuse valimiseks peame seega lisaman funktsiooni ette loogikaoperaatori <code>!</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Algne ridade arv</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7680</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sõelume välja väärtused, kus vaatlusperiood ei ole puudu.</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>palk <span class="ot">&lt;-</span> <span class="fu">filter</span>(palk, <span class="sc">!</span><span class="fu">is.na</span>(Vaatlusperiood))</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Ridade arv pärast puuduvate väärtustega ridade eemaldamist</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1120</code></pre>
</div>
</div>
<p>Teine võimalus on kasutada funktsiooni <code>complete.cases()</code>, mis väljastab andmetabelis puuduvate väärtusteta read määrava tõeväärtuse, võttes puuduvate väärtuse määramisel arvesse kõiki veerge.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Valime read, kus on ainult täielikud vaatlused</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>palk <span class="ot">&lt;-</span> palk[<span class="fu">complete.cases</span>(palk), ]</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Eemaldame puuduvate väärtustega read</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>palk <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!--
Data preparation
-->
</section>
<section id="väärtuste-asendamine" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="väärtuste-asendamine"><span class="header-section-number">6.5</span> Väärtuste asendamine</h2>
<p>Mõnikord esineb andmetes väärtusi, mis ei ole teoreetiliselt võimalikud. Sellisel juhul on kolm viisi, kuidas sobimatud väärtused kõrvaldada.</p>
<ul>
<li>Arvtunnuse korral saab ebasobiva väärtuse asendada vastavalt vähima või suurima teoreetiliselt võimaliku väärtusega.</li>
<li>Võimalusel saab eemaldada kogu ebasobivaid väärtuseid sisaldava tunnuse.</li>
<li>Ebasobivaid väärtusi saab kohelda nii nagu puuduvaid väärtuseid.</li>
</ul>
<p>Kui oletame, et meie andmetabelis oleval ajavahemikul oli alampalk kõige vähem 278 eurot kuus, siis ei tohiks olla väärtuseid, kus keskmine brutokuupalk on sellest madalam.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tekitame uue andmetabeli ainult kõikide tegevusalade keskmise kuupalgaga</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>bruto <span class="ot">&lt;-</span> <span class="fu">filter</span>(palk, </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>                Näitaja <span class="sc">==</span> <span class="st">'Keskmine brutokuupalk, eurot'</span> <span class="sc">&amp;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>                  Tegevusala <span class="sc">==</span> <span class="st">'Kokku – kõik tegevusalad'</span>)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Määrame väärtuseks 278 juhtudel, kus väärtus on vähem kui 278</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>bruto<span class="sc">$</span>väärtus[bruto<span class="sc">$</span>väärtus <span class="sc">&lt;</span> <span class="dv">278</span>] <span class="ot">&lt;-</span> <span class="dv">278</span></span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<!--
Data preparation
-->
</section>
<section id="väärtuste-teisendamine" class="level2 page-columns page-full" data-number="6.6">
<h2 data-number="6.6" class="anchored" data-anchor-id="väärtuste-teisendamine"><span class="header-section-number">6.6</span> Väärtuste teisendamine</h2>
<p>Väärtuste teisendamise käigus antakse tunnusele uued väärtused lähtudes algsetest väärtustest. Selleks on mitu põhjust ja viisi.</p>
<ul>
<li>Kui tunnusel on palju äärmuslikul suuri või väikseid väärtusi, siis selline tunnus ei sobi paljude parameetriliste meetodite rakendamiseks. Sellisel juhul saab kasutada erinevaid matemaatilisi teisendusi, mis muudab väärtuste jaotuse sümmeetrilisemaks<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</li>
<li>Teatud meetodid eeldavad, et andmed on mõõdetud samal skaalal ehk omavad sarnaseid väärtusi. Sellisel juhul saame väärtused standardiseerida<!--, millest on täpsemalt juttu @sec-standardiseerimine-->.</li>
<li>Kui tunnusel on rohkem kordumatuid väärtusi kui soovime, siis saame väärtused intervallida.</li>
</ul>
<div class="no-row-height column-margin column-container"><li id="fn2"><p><sup>2</sup>&nbsp;Kui tunnusel on palju äärmuslikult suuri jaotusi, siis naturaallogaritm väärtustest annab tulemuseks sümmeetrilise jaotuse.</p></li></div><p>Kui soovime keskmise brutokuupalga esitada 500 euro laiuste intervallidena, siis saame intervallimiseks kasutada funktsiooni <code>cut()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>bruto<span class="sc">$</span>intervallid <span class="ot">&lt;-</span> <span class="fu">cut</span>(bruto<span class="sc">$</span>väärtus, </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">500</span>,<span class="dv">1000</span>,<span class="dv">1500</span>,<span class="cn">Inf</span>), </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"&gt;500...1000"</span>,<span class="st">"&gt;1000...1500"</span>,<span class="st">"&gt;1500"</span>))</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>bruto <span class="sc">%&gt;%</span> <span class="fu">select</span>(Vaatlusperiood, väärtus, intervallid)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Vaatlusperiood väärtus  intervallid
1            2008     825  &gt;500...1000
2            2009     784  &gt;500...1000
3            2010     792  &gt;500...1000
4            2011     839  &gt;500...1000
5            2012     887  &gt;500...1000
6            2013     949  &gt;500...1000
7            2014    1005 &gt;1000...1500
8            2015    1065 &gt;1000...1500
9            2016    1146 &gt;1000...1500
10           2017    1221 &gt;1000...1500
11           2018    1310 &gt;1000...1500
12           2019    1407 &gt;1000...1500
13           2020    1448 &gt;1000...1500
14           2021    1548        &gt;1500</code></pre>
</div>
</div>
<p>Andmetabelisse saab lisada tunnuseid või neid muuta muuhulgas ka funktsiooni <code>mutate()</code> abil.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mis aastatel oli keskmine brutotöötasu üle keskmise?</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>bruto <span class="ot">&lt;-</span> <span class="fu">mutate</span>(bruto, ü<span class="at">lekeskmise =</span> väärtus <span class="sc">&gt;</span> <span class="fu">mean</span>(väärtus))</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(bruto)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       Näitaja               Tegevusala Vaatlusperiood väärtus
1 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad           2008     825
2 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad           2009     784
3 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad           2010     792
4 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad           2011     839
5 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad           2012     887
6 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad           2013     949
  intervallid ülekeskmise
1 &gt;500...1000       FALSE
2 &gt;500...1000       FALSE
3 &gt;500...1000       FALSE
4 &gt;500...1000       FALSE
5 &gt;500...1000       FALSE
6 &gt;500...1000       FALSE</code></pre>
</div>
</div>
<!--
Data preparation
-->
</section>
<section id="korrasandmed" class="level2 page-columns page-full" data-number="6.7">
<h2 data-number="6.7" class="anchored" data-anchor-id="korrasandmed"><span class="header-section-number">6.7</span> Korrasandmed</h2>
<p>Korrasandmed (<em>tidy data</em> <span class="citation" data-cites="wickham14tidy">(<a href="viited.html#ref-wickham14tidy" role="doc-biblioref">Wickham, 2014</a>)</span>) on andmetabeli vormistamise viis, mille korral</p>
<ol type="1">
<li>iga tunnus on eraldi veerus,</li>
<li>iga vaatlus on eraldi real,</li>
<li>iga vaatluste aluseks olev üksus on omaette tabelis<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</li>
</ol>
<!--
Tidy data
-->
<div class="no-row-height column-margin column-container"><li id="fn3"><p><sup>3</sup>&nbsp;Nt tellimuste tabelis ei peaks olema kõiki tellija tunnuseid, vaid tellimused ja tellijad tuleks hoida eraldi tabeltes ning ainult vajaduse korral need tellija koodi alusel kokku viia.</p></li></div><section id="andmetabeli-laiendamine" class="level3" data-number="6.7.1">
<h3 data-number="6.7.1" class="anchored" data-anchor-id="andmetabeli-laiendamine"><span class="header-section-number">6.7.1</span> Andmetabeli laiendamine</h3>
<p>Meie andmed brutotöötasu kohta vastavad tingimusele, et iga vaatlus (mõõtmine) on eraldi real. Kui lähtume aga sellest, et iga näitaja on omaette tunnus, siis peaks iga näitaja väärtused olema eraldi veerus, et meie andmed korrasandmete tingimusele vastaksid.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       Näitaja               Tegevusala Vaatlusperiood väärtus
1 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad           2008     825
2 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad           2009     784
3 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad           2010     792
4 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad           2011     839
5 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad           2012     887
6 Keskmine brutokuupalk, eurot Kokku – kõik tegevusalad           2013     949</code></pre>
</div>
</div>
<p>Sellist andmetabelit, milles iga rida sisaldab ainult ühte väärtust, võiks nimetada täielikult kitsaks. Selline kitsas andmetabel ei pruugi olla kõige sobivam viis selles olevate andmete analüüsimiseks. Nt on praegu keeruline võrrelda kahe näitaja väärtusi, sest need väärtused on kõik ühes veerus. Kui soovime tõsta iga näitaja eraldi veergu ehk antud juhul andmetabelit laiendada, siis saame selleks kasutada funktsiooni <code>pivot_wider()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>palk <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(palk, <span class="at">names_from =</span> <span class="st">'Näitaja'</span>, <span class="at">values_from =</span> <span class="st">'väärtus'</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  Tegevusala               Vaatlusperiood Keskmine bru…¹ Keskm…² Osali…³ Keskm…⁴
  &lt;chr&gt;                             &lt;dbl&gt;          &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 Kokku – kõik tegevusalad           2008            825    1113     6.4  543432
2 Kokku – kõik tegevusalad           2009            784    1067     8.2  488166
3 Kokku – kõik tegevusalad           2010            792    1074     8.1  458523
4 Kokku – kõik tegevusalad           2011            839    1137     7.3  469123
5 Kokku – kõik tegevusalad           2012            887    1203     7.2  489054
6 Kokku – kõik tegevusalad           2013            949    1284     7    487591
# … with abbreviated variable names ¹​`Keskmine brutokuupalk, eurot`,
#   ²​`Keskmine kuutööjõukulu töötaja kohta, eurot`,
#   ³​`Osalise tööajaga töötajate töötatud tundide osakaal, %`,
#   ⁴​`Keskmine töötajate arv, taandatud täistööajale`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Kuna veeru nimed sisaldavad nüüd tühikuid, siis nimetame need ümber.</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(palk) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'tegevusala'</span>, <span class="st">'aasta'</span>, </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>                 <span class="st">'kesk.palk'</span>, <span class="st">'kesk.kulu'</span>, <span class="st">'osatööaeg'</span>, <span class="st">'töötajad'</span>)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  tegevusala               aasta kesk.palk kesk.kulu osatööaeg töötajad
  &lt;chr&gt;                    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 Kokku – kõik tegevusalad  2008       825      1113       6.4   543432
2 Kokku – kõik tegevusalad  2009       784      1067       8.2   488166
3 Kokku – kõik tegevusalad  2010       792      1074       8.1   458523
4 Kokku – kõik tegevusalad  2011       839      1137       7.3   469123
5 Kokku – kõik tegevusalad  2012       887      1203       7.2   489054
6 Kokku – kõik tegevusalad  2013       949      1284       7     487591</code></pre>
</div>
</div>
<p>Sellisel kujul tabeliga on meil võimalik erinevatel küsimustele vastamiseks arvutusi teha.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mitu eurot kulus keskmiselt tööjõumaksudeks?</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>palk<span class="sc">$</span>kesk.maksud <span class="ot">&lt;-</span> palk<span class="sc">$</span>kesk.kulu <span class="sc">-</span> palk<span class="sc">$</span>kesk.palk</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
  tegevusala               aasta kesk.palk kesk.kulu osatööaeg töötajad kesk.m…¹
  &lt;chr&gt;                    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1 Kokku – kõik tegevusalad  2008       825      1113       6.4   543432      288
2 Kokku – kõik tegevusalad  2009       784      1067       8.2   488166      283
3 Kokku – kõik tegevusalad  2010       792      1074       8.1   458523      282
4 Kokku – kõik tegevusalad  2011       839      1137       7.3   469123      298
5 Kokku – kõik tegevusalad  2012       887      1203       7.2   489054      316
6 Kokku – kõik tegevusalad  2013       949      1284       7     487591      335
# … with abbreviated variable name ¹​kesk.maksud</code></pre>
</div>
</div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Pea meeles!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Enamus funktsioone eeldavad, et funktsiooni argumentidena esitab kasutaja tunnuse väärtusi sisaldava veeru. Seetõttu tuleks andmetabel vormistada selliselt, et iga tunnuse väärtused on eraldi veerus.</p>
</div>
</div>
</section>
<section id="andmetabeli-kitsendamine" class="level3" data-number="6.7.2">
<h3 data-number="6.7.2" class="anchored" data-anchor-id="andmetabeli-kitsendamine"><span class="header-section-number">6.7.2</span> Andmetabeli kitsendamine</h3>
<p>Sageli on meil aga vastupidine olukord, kus ühe tunnuse väärtused on jagatud mitmesse veergu. See oli kunagi sagedane nt Statistikaameti tabelite korral, milles vaikimisi esitati iga aasta väärtused eraldi veerus. Sellisel kujul andmed sobivad küll aegridade joonistamiseks tabelarvutuse rakendustes, aga mitte R keele funktsioonide kasutamiseks.</p>
<p>All on esitatud Statistikaameti tabel PA5335 palgalõhe kohta, milles iga aasta väärtused on eraldi veerus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lõhe)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 13
  Tegev…¹ Näitaja `2011` `2012` `2013` `2014` `2015` `2016` `2017` `2018` `2019`
  &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
1 Tegevu… Meestö…    5.7    5.7    6.1    6.4    7      7.6    7.9    7.9    8.6
2 Tegevu… Naistö…    4.4    4.3    4.6    4.9    5.4    6      6.3    6.5    7.1
3 Tegevu… Palgal…   22.9   24.6   24.8   23.5   22.2   20.9   20.9   18     17.1
4 Põllum… Meestö…    4.2    4.2    4.9    5.2    6.3    6.8    6.7    6.5    6.8
5 Põllum… Naistö…    3.6    3.9    4.3    4.5    5      5.5    5.8    5.3    5.7
6 Põllum… Palgal…   14.7    7     12.7   14.5   20.1   19.2   13.2   18.5   15.8
# … with 2 more variables: `2020` &lt;dbl&gt;, `2021` &lt;dbl&gt;, and abbreviated variable
#   name ¹​Tegevusala..EMTAK.2008.</code></pre>
</div>
</div>
<p>Koondamaks kõikide aastate väärtused ühte veergu, tuleks seda andmetabelit kitsendada ehk pikendada. Seda saab teha nt funktsiooniga <code>pivot_longer()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Viime kõik aastad ühte veergu</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>lõhe <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(lõhe, <span class="at">cols =</span> <span class="fu">as.character</span>(<span class="dv">2011</span><span class="sc">:</span><span class="dv">2021</span>), </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">names_to =</span> <span class="st">'aasta'</span>, <span class="at">values_to =</span> <span class="st">'väärtus'</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lõhe)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  Tegevusala..EMTAK.2008. Näitaja                                  aasta väärtus
  &lt;chr&gt;                   &lt;chr&gt;                                    &lt;chr&gt;   &lt;dbl&gt;
1 Tegevusalad kokku       Meestöötajate keskmine brutotunnipalk, … 2011      5.7
2 Tegevusalad kokku       Meestöötajate keskmine brutotunnipalk, … 2012      5.7
3 Tegevusalad kokku       Meestöötajate keskmine brutotunnipalk, … 2013      6.1
4 Tegevusalad kokku       Meestöötajate keskmine brutotunnipalk, … 2014      6.4
5 Tegevusalad kokku       Meestöötajate keskmine brutotunnipalk, … 2015      7  
6 Tegevusalad kokku       Meestöötajate keskmine brutotunnipalk, … 2016      7.6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Viime iga näitaja eraldi veergu</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>lõhe <span class="ot">&lt;-</span> <span class="fu">pivot_wider</span>(lõhe, <span class="at">names_from =</span> <span class="st">'Näitaja'</span>, <span class="at">values_from =</span> <span class="st">'väärtus'</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lõhe)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  Tegevusala..EMTAK.2008. aasta Meestöötajate keskmine brutotu…¹ Naist…² Palga…³
  &lt;chr&gt;                   &lt;chr&gt;                            &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
1 Tegevusalad kokku       2011                               5.7     4.4    22.9
2 Tegevusalad kokku       2012                               5.7     4.3    24.6
3 Tegevusalad kokku       2013                               6.1     4.6    24.8
4 Tegevusalad kokku       2014                               6.4     4.9    23.5
5 Tegevusalad kokku       2015                               7       5.4    22.2
6 Tegevusalad kokku       2016                               7.6     6      20.9
# … with abbreviated variable names
#   ¹​`Meestöötajate keskmine brutotunnipalk, eurot`,
#   ²​`Naistöötajate keskmine brutotunnipalk, eurot`, ³​`Palgalõhe, %`</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Parendame veergude nimetusi</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(lõhe) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">'tegevusala'</span>, <span class="st">'aasta'</span>, <span class="st">'mehed.palk'</span>, <span class="st">'naised.palk'</span>, <span class="st">'lõhe.osa'</span>)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lõhe)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  tegevusala        aasta mehed.palk naised.palk lõhe.osa
  &lt;chr&gt;             &lt;chr&gt;      &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;
1 Tegevusalad kokku 2011         5.7         4.4     22.9
2 Tegevusalad kokku 2012         5.7         4.3     24.6
3 Tegevusalad kokku 2013         6.1         4.6     24.8
4 Tegevusalad kokku 2014         6.4         4.9     23.5
5 Tegevusalad kokku 2015         7           5.4     22.2
6 Tegevusalad kokku 2016         7.6         6       20.9</code></pre>
</div>
</div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Pea meeles!
</div>
</div>
<div class="callout-body-container callout-body">
<p>Korduvate mõõtmiste korral tuleks mõõtmise aeg kajastada eraldi veerus ja mitte jaotada sama tunnuse mõõtmisi erinevate veergude vahel.</p>
</div>
</div>
</section>
</section>
<section id="agregeerimine" class="level2" data-number="6.8">
<h2 data-number="6.8" class="anchored" data-anchor-id="agregeerimine"><span class="header-section-number">6.8</span> Agregeerimine</h2>
<p>Sageli on vaja andmetabelis olevad väärtused edasiseks analüüsiks kuidagi koondada. Väärtuste kokku võtmine mingite rühmade kaupa ja mingi tehte alusel on <strong>agregeerimine</strong>. Nii on agregeerimisel vaja määrata</p>
<ul>
<li>väärtusi sisaldav kokku võetav tunnus,</li>
<li>väärtusi rühmitav tunnus,</li>
<li>kokkuvõtte aluseks olev tehe (funktsioon).</li>
</ul>
<p>Andmetabeli agregeerimiseks on R keeles funktsioon <code>aggregate()</code>, mille argumentideks tuleb sisestada need kolm tegurit.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(palk)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
  tegevusala               aasta kesk.palk kesk.kulu osatööaeg töötajad kesk.m…¹
  &lt;chr&gt;                    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1 Kokku – kõik tegevusalad  2008       825      1113       6.4   543432      288
2 Kokku – kõik tegevusalad  2009       784      1067       8.2   488166      283
3 Kokku – kõik tegevusalad  2010       792      1074       8.1   458523      282
4 Kokku – kõik tegevusalad  2011       839      1137       7.3   469123      298
5 Kokku – kõik tegevusalad  2012       887      1203       7.2   489054      316
6 Kokku – kõik tegevusalad  2013       949      1284       7     487591      335
# … with abbreviated variable name ¹​kesk.maksud</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mis oli igal tegevusalal perioodi keskmise brutotöötasu keskmine?</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(kesk.palk <span class="sc">~</span> tegevusala, palk, mean)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                           tegevusala kesk.palk
1        Avalik haldus ja riigikaitse; kohustuslik sotsiaalkindlustus 1332.3571
2                                                              Ehitus 1076.3571
3  Elektrienergia, gaasi, auru ja konditsioneeritud õhuga varustamine 1535.0714
4                                       Finants- ja kindlustustegevus 1822.4286
5                                             Haldus- ja abitegevused  959.2143
6                                                             Haridus  974.4286
7     Hulgi- ja jaekaubandus; mootorsõidukite ja mootorrataste remont  988.1429
8                                                        Info ja side 1820.7143
9                                             Kinnisvaraalane tegevus  826.7857
10                                           Kokku – kõik tegevusalad 1087.5714
11                                    Kunst, meelelahutus ja vaba aeg  864.0000
12                            Kutse-, teadus- ja tehnikaalane tegevus 1286.5714
13                                                         Mäetööstus 1330.0000
14                                              Majutus ja toitlustus  688.2857
15                                         Muud teenindavad tegevused  710.8571
16                           Põllumajandus, metsamajandus ja kalapüük  932.2857
17                                   Tervishoid ja sotsiaalhoolekanne 1132.3571
18                                                    Töötlev tööstus 1035.2143
19              Veevarustus; kanalisatsioon; jäätme- ja saastekäitlus 1092.7857
20                                                 Veondus ja laondus 1065.8571</code></pre>
</div>
</div>
<p>Teine võimalus agregeerimiseks on kasutada pakis <code>tidyverse</code> sisalduvaid funktsioone <code>group_by()</code> esmalt rühmitamiseks ja <code>summarise()</code> seejärel kokku võtmiseks.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lõhe)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  tegevusala        aasta mehed.palk naised.palk lõhe.osa
  &lt;chr&gt;             &lt;chr&gt;      &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;
1 Tegevusalad kokku 2011         5.7         4.4     22.9
2 Tegevusalad kokku 2012         5.7         4.3     24.6
3 Tegevusalad kokku 2013         6.1         4.6     24.8
4 Tegevusalad kokku 2014         6.4         4.9     23.5
5 Tegevusalad kokku 2015         7           5.4     22.2
6 Tegevusalad kokku 2016         7.6         6       20.9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mis oli igal tegevusalal kõige suurem palgalõhe?</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>lõhe <span class="sc">%&gt;%</span> </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(tegevusala) <span class="sc">%&gt;%</span> <span class="co"># Rühmitame andmetabeli tegevusala alusel</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">max</span>(lõhe.osa)) <span class="co"># Leiame suurima palgalõhe</span></span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 20 × 2
   tegevusala                                                         max(lõhe…¹
   &lt;chr&gt;                                                                   &lt;dbl&gt;
 1 Avalik haldus ja riigikaitse; kohustuslik sotsiaalkindlustus             12.1
 2 Ehitus                                                                   22  
 3 Elektrienergia, gaasi, auru ja konditsioneeritud õhuga varustamine       18.4
 4 Finants- ja kindlustustegevus                                            43.3
 5 Haldus- ja abitegevused                                                  20.4
 6 Haridus                                                                  26.4
 7 Hulgi- ja jaekaubandus; mootorsõidukite ja mootorrataste remont          33.8
 8 Info ja side                                                             30.1
 9 Kinnisvaraalane tegevus                                                  27.3
10 Kunst, meelelahutus ja vaba aeg                                          28.1
11 Kutse-, teadus- ja tehnikaalane tegevus                                  24.7
12 Mäetööstus                                                               36.4
13 Majutus ja toitlustus                                                    20.9
14 Muud teenindavad tegevused                                               27.4
15 Põllumajandus, metsamajandus ja kalapüük                                 20.1
16 Tegevusalad kokku                                                        24.8
17 Tervishoid ja sotsiaalhoolekanne                                         29.7
18 Töötlev tööstus                                                          31.5
19 Veevarustus; kanalisatsioon, jäätme- ja saastekäitlus                    13.6
20 Veondus ja laondus                                                       10.3
# … with abbreviated variable name ¹​`max(lõhe.osa)`</code></pre>
</div>
</div>
<p>Väga sageli on kasu ka funktsioonist <code>table()</code>, mille abil saab väärtuseid loendada.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(lõhe)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 5
  tegevusala        aasta mehed.palk naised.palk lõhe.osa
  &lt;chr&gt;             &lt;chr&gt;      &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;
1 Tegevusalad kokku 2011         5.7         4.4     22.9
2 Tegevusalad kokku 2012         5.7         4.3     24.6
3 Tegevusalad kokku 2013         6.1         4.6     24.8
4 Tegevusalad kokku 2014         6.4         4.9     23.5
5 Tegevusalad kokku 2015         7           5.4     22.2
6 Tegevusalad kokku 2016         7.6         6       20.9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mitu korda iga tegevusala tabelis esineb?</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(lõhe<span class="sc">$</span>tegevusala)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
      Avalik haldus ja riigikaitse; kohustuslik sotsiaalkindlustus 
                                                                11 
                                                            Ehitus 
                                                                11 
Elektrienergia, gaasi, auru ja konditsioneeritud õhuga varustamine 
                                                                11 
                                     Finants- ja kindlustustegevus 
                                                                11 
                                           Haldus- ja abitegevused 
                                                                11 
                                                           Haridus 
                                                                11 
   Hulgi- ja jaekaubandus; mootorsõidukite ja mootorrataste remont 
                                                                11 
                                                      Info ja side 
                                                                11 
                                           Kinnisvaraalane tegevus 
                                                                11 
                                   Kunst, meelelahutus ja vaba aeg 
                                                                11 
                           Kutse-, teadus- ja tehnikaalane tegevus 
                                                                11 
                                                        Mäetööstus 
                                                                11 
                                             Majutus ja toitlustus 
                                                                11 
                                        Muud teenindavad tegevused 
                                                                11 
                          Põllumajandus, metsamajandus ja kalapüük 
                                                                11 
                                                 Tegevusalad kokku 
                                                                11 
                                  Tervishoid ja sotsiaalhoolekanne 
                                                                11 
                                                   Töötlev tööstus 
                                                                11 
             Veevarustus; kanalisatsioon, jäätme- ja saastekäitlus 
                                                                11 
                                                Veondus ja laondus 
                                                                11 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mitmel aastal oli igal tegevusalal palgalõhe rohkem kui 10%?</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(lõhe<span class="sc">$</span>tegevusala, lõhe<span class="sc">$</span>lõhe.osa <span class="sc">&gt;</span> <span class="dv">10</span>)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                                    
                                                                     FALSE TRUE
  Avalik haldus ja riigikaitse; kohustuslik sotsiaalkindlustus           8    3
  Ehitus                                                                 1   10
  Elektrienergia, gaasi, auru ja konditsioneeritud õhuga varustamine     1   10
  Finants- ja kindlustustegevus                                          0   11
  Haldus- ja abitegevused                                                2    9
  Haridus                                                                0   11
  Hulgi- ja jaekaubandus; mootorsõidukite ja mootorrataste remont        0   11
  Info ja side                                                           0   11
  Kinnisvaraalane tegevus                                                0   11
  Kunst, meelelahutus ja vaba aeg                                        1   10
  Kutse-, teadus- ja tehnikaalane tegevus                                2    9
  Mäetööstus                                                             0   11
  Majutus ja toitlustus                                                  1   10
  Muud teenindavad tegevused                                             2    9
  Põllumajandus, metsamajandus ja kalapüük                               3    8
  Tegevusalad kokku                                                      0   11
  Tervishoid ja sotsiaalhoolekanne                                       0   11
  Töötlev tööstus                                                        0   11
  Veevarustus; kanalisatsioon, jäätme- ja saastekäitlus                  8    3
  Veondus ja laondus                                                    10    1</code></pre>
</div>
</div>
<p>Üleval olevast tabelist näeme muuhulgas, et</p>
<ul>
<li>veonduses ja laonduses oli palgalõhe ainult ühel aastal üle 10%, samas kui</li>
<li>hariduses oli kõikidel aastatel palgalõhe üle 10%.</li>
</ul>
<!--
Aggregation
-->
</section>
<section id="tabelite-ühendamine" class="level2 page-columns page-full" data-number="6.9">
<h2 data-number="6.9" class="anchored" data-anchor-id="tabelite-ühendamine"><span class="header-section-number">6.9</span> Tabelite ühendamine</h2>
<p>Mõnikord on sama vaatluse andmed erinevates tabelites. Sellisel juhul saame kaks tabelit omavahel ühendada ühe või mitme tunnuse väärtuste alusel.</p>
<p>Käesolevates näidetes võiksime ühendada brutopalga ja palgalõhe andmetabelid <code>palk</code> ja <code>lõhe</code>. Mõlemas tabelis esindab iga rida ühte tegevusala ühel aastal, mistõttu saab nende kahe tunnuse alusel read kokku viia.</p>
<p>Selleks peavad sama tähendusega väärtused olema samamoodi nimetatud. Saame seda kontrollida funktsiooniga <code>setdiff()</code>, mis näitab, millised esimeses argumendis olevad kordumatud väärtused on puudu teisest argumendist.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Milliseid palgalõhe tabelis olevaid tegevusalasid ei ole brutopalga tabelis?</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(lõhe<span class="sc">$</span>tegevusala, palk<span class="sc">$</span>tegevusala)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Tegevusalad kokku"                                    
[2] "Veevarustus; kanalisatsioon, jäätme- ja saastekäitlus"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Milliseid brutopalga tabelis olevaid tegevusalasid ei ole palgalõhe tabelis?</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(palk<span class="sc">$</span>tegevusala, lõhe<span class="sc">$</span>tegevusala)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Kokku – kõik tegevusalad"                             
[2] "Veevarustus; kanalisatsioon; jäätme- ja saastekäitlus"</code></pre>
</div>
</div>
<p>Näeme, et kahes tabelis on samad nähtused kas erinevate nimetustega või siis on semikooloni asemel kastatud koma. Muudame väärtuste nimetused nii, et sama nähtus oleks täpselt samamoodi sõnastatud.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Määrame palgalõhe tabelis tegevusalale semikooloni koma asemele</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>lõhe<span class="sc">$</span>tegevusala[lõhe<span class="sc">$</span>tegevusala <span class="sc">==</span> <span class="st">'Veevarustus; kanalisatsioon, jäätme- ja saastekäitlus'</span>] <span class="ot">&lt;-</span> <span class="st">'Veevarustus; kanalisatsioon; jäätme- ja saastekäitlus'</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Määrame brutopalga tabelis veerus tegevusala "Tegevusalad kokku" seal, </span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a><span class="co"># kus on pregu on "Kokku - kõik tegevusalad"</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>palk<span class="sc">$</span>tegevusala[palk<span class="sc">$</span>tegevusala <span class="sc">==</span> <span class="st">'Kokku – kõik tegevusalad'</span>] <span class="ot">&lt;-</span> <span class="st">'Tegevusalad kokku'</span></span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Kaks tabelit saame ühendada funktsiooniga <code>merge()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>palkLõhe <span class="ot">&lt;-</span> <span class="fu">merge</span>(</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  palk, lõhe, </span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">by.x =</span> <span class="fu">c</span>(<span class="st">'tegevusala'</span>, <span class="st">'aasta'</span>), <span class="co"># Brutopalga tabeli ühendatavad tunnused</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by.y =</span> <span class="fu">c</span>(<span class="st">'tegevusala'</span>, <span class="st">'aasta'</span>), <span class="co"># Palgalõhe tabeli ühendatavad tunnused</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">all.x =</span> <span class="cn">TRUE</span>, <span class="co"># Jätame alles kõik brutopalga tabeli read</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">all.y =</span> <span class="cn">TRUE</span>) <span class="co"># Jätame alles kõik palgalõhe tabeli read</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Meie andmetabelites on ühendatavad tunnused sama nimega, </span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a><span class="co"># seega võime mõned argumendid ära jätta või neid lihtsustada</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>palkLõhe <span class="ot">&lt;-</span> <span class="fu">merge</span>(palk, lõhe, <span class="at">all =</span> <span class="cn">TRUE</span>)</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(palkLõhe)</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                    tegevusala aasta kesk.palk
1 Avalik haldus ja riigikaitse; kohustuslik sotsiaalkindlustus  2008      1061
2 Avalik haldus ja riigikaitse; kohustuslik sotsiaalkindlustus  2009       981
3 Avalik haldus ja riigikaitse; kohustuslik sotsiaalkindlustus  2010       955
4 Avalik haldus ja riigikaitse; kohustuslik sotsiaalkindlustus  2011       988
5 Avalik haldus ja riigikaitse; kohustuslik sotsiaalkindlustus  2012      1037
6 Avalik haldus ja riigikaitse; kohustuslik sotsiaalkindlustus  2013      1130
  kesk.kulu osatööaeg töötajad kesk.maksud mehed.palk naised.palk lõhe.osa
1      1434       2.6    34776         373         NA          NA       NA
2      1337       3.6    34693         356         NA          NA       NA
3      1297       3.4    34935         342         NA          NA       NA
4      1341       3.2    35034         353        6.2         5.5     10.2
5      1408       2.9    35138         371        5.8         5.3      9.8
6      1526       2.6    34552         396        6.4         5.7     12.1</code></pre>
</div>
</div>
<p>Ühendatud tabeli alusel saame varem kahes eraldi tabelis olnud tunnuseid nüüd omavahel võrrelda. Näiteks saame uurida, kuidas on palgalõhe seotud osatööaja, keskmise palga ja tegevusalaga ning kuidas see seos aastate jooksul muutunud on.</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(palkLõhe) <span class="sc">+</span> </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> lõhe.osa, <span class="at">y =</span> osatööaeg, <span class="at">size =</span> kesk.palk, <span class="at">color =</span> aasta) <span class="sc">+</span> </span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>tegevusala, <span class="at">ncol =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Kopeeri lõikelauale" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display column-page-right">
<p><img src="korrastus_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<!--
case_when()
recode()
-->


<div id="refs" class="references csl-bib-body hanging-indent" data-line-spacing="2" role="doc-bibliography" style="display: none">
<div id="ref-kelleher18data" class="csl-entry" role="doc-biblioentry">
Kelleher, J. D., &amp; Tierney, B. (2018). <em>Data science</em>. The MIT Press.
</div>
<div id="ref-wickham14tidy" class="csl-entry" role="doc-biblioentry">
Wickham, H. (2014). Tidy Data. <em>Journal of Statistical Software</em>, <em>059</em>(i10). <a href="https://ideas.repec.org/a/jss/jstsof/v059i10.html">https://ideas.repec.org/a/jss/jstsof/v059i10.html</a>
</div>
</div>
</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopeeritud!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./kasutus.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Põhikasutus</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./joonised.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Joonised</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>